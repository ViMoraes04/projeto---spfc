<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/login.css">

</head>

<body>
    <header>
        <nav class="navbar">
          <a href="index.html">Home</a>
          <a href="jogadores.html">Jogadores</a>
          <a href="idolos.html">Ídolos</a>
          <a href="titulo.html">Títulos</a>
          <a href="sobremim.html">Sobre Mim</a>
            <a href="login.html"><button class="botao">Login</button></a>
        </nav>
    </header>
    <div class="tela_cadastro">
        <h1>Cadastro</h1>
        <div class="container-input">
          <div class="label">
            <label for="ipt_email">Nome:</label>
        </div>
            <input type="text" placeholder="" id="nome_input">
        </div>
        <br>
        <div class="container-input">
          <div class="label">
            <label for="ipt_email">Email:</label>
        </div>
            <input type="text" placeholder="" id="email_input">
        </div>
        <br>
        <div class="container-input">
          <div class="label">
            <label for="ipt_senha">Senha:</label>
        </div>
            <input type="password" placeholder="" id="senha_input">
        </div>
        <br>
        <div class="container-input">
          <div class="label">
            <label for="ipt_confirmar">Confirme a Senha:</label>
        </div>
            <input type="password" placeholder="" id="confirmacao_senha_input">
        </div>
        <br><br><br><br><br>
        <button onclick="cadastrar()" class="botao-tela">Cadastrar</button>
        <div id="div_mensagem"></div>
    </div>
</body>
</html>
<script>
    function cadastrar() {
     
      var nomeVar = nome_input.value;
      var emailVar = email_input.value;
      var senhaVar = senha_input.value;
      var confirmacaoSenhaVar = confirmacao_senha_input.value;
    
      var valido = true;
            
            // Validar o nome
            if (nomeVar.trim() === '') {
                alert('O nome é obrigatório.');
                valido = false;
            }

            // Validar o e-mail (verificar se contém @)
            if (!emailVar.includes('@') || !emailVar.includes('.')) {
                alert('Por favor, insira um e-mail válido.');
                valido = false;
            }

            // Validar a senha
            if (senhaVar.length < 8) {
                alert('A senha deve ter no mínimo 8 caracteres.');
                valido = false;
            }

            // Validar a confirmação da senha
            if (senhaVar !== confirmacaoSenhaVar) {
                alert('As senhas não coincidem.');
                valido = false;
            }

      // Verificando se há algum campo em branco
      if (
        nomeVar == "" ||
        emailVar == "" ||
        senhaVar == "" ||
        confirmacaoSenhaVar == "" 
      ) {
    //     cardErro.style.display = "block";
    //     mensagem_erro.innerHTML =
    //       "(Mensagem de erro para todos os campos em branco)";
  
    //     finalizarAguardar();
    //     return false;
    //   } else {
    //     setInterval(sumirMensagem, 5000);
    //   }
      }

                sessionStorage.EMAIL_USUARIO = emailVar;
                sessionStorage.NOME_USUARIO = nomeVar;
                sessionStorage.SENHA_USUARIO = senhaVar;
  
  
      // Enviando o valor da nova input
      // fetch("/usuarios/cadastrar", {
      //   method: "POST",
      //   headers: {
      //     "Content-Type": "application/json",
      //   },
      //   body: JSON.stringify({
      //     nomeServer: nomeVar,
      //     emailServer: emailVar,
      //     senhaServer: senhaVar        
      //   }),
      // })
      //   .then(function (resposta) {
      //     console.log("resposta: ", resposta);
  
      //     if (resposta.ok) {
      //       console.log(resposta);

      //       resposta.json().then(json => {
      //           console.log(json);
      //           console.log(JSON.stringify(json));
      //           sessionStorage.EMAIL_USUARIO = json.email;
      //           sessionStorage.NOME_USUARIO = json.nome;
      //           sessionStorage.ID_USUARIO = json.id;
      //         });
              
            div_mensagem.innerHTML =
              "Cadastro realizado com sucesso! Redirecionando para tela de Login...";
  
            setTimeout(() => {
              window.location = "formulario.html";
            }, "2000");
          }
        
        
            
  </script>